<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FinTrack - Статистика</title>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/frontend/css/sidebar.css" />
    <link rel="stylesheet" href="/frontend/css/header.css" />
    <link rel="stylesheet" href="/frontend/css/dashboard.css" />
    <link rel="stylesheet" href="/frontend/css/statistics.css" />

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/frontend/images/icon_logo.png"
    />
  </head>
  <body>
    <!-- Боковое меню -->
    <div class="sidebar">
      <div class="logo">
        <img src="/frontend/images/logo.png" alt="FinTrack" />
        <p>FinTrack</p>
      </div>
      <ul class="main">
        <li>
          <a href="/frontend/dashboard.html">
            <i class="bx bxs-dashboard"></i>
            <span>Дашборд</span>
          </a>
        </li>
        <li>
          <a href="/frontend/transactions.html">
            <i class="bx bx-transfer-alt"></i>
            <span>Транзакции</span>
          </a>
        </li>
        <li>
          <a href="/frontend/budget.html">
            <i class="bx bx-briefcase"></i>
            <span>Бюджет</span>
          </a>
        </li>
        <li class="active">
          <a href="/frontend/statistics.html">
            <i class="bx bx-stats"></i>
            <span>Статистика</span>
          </a>
        </li>
        <li>
          <a href="/frontend/calendar.html">
            <i class="bx bx-calendar"></i>
            <span>Календарь</span>
          </a>
        </li>
        <li>
          <a href="/frontend/goals.html">
            <i class="bx bxs-star-half"></i>
            <span>Цели</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Верхнее меню -->
    <div class="header">
      <div class="greeting">
        <h1 id="greeting-text">Загрузка...</h1>
      </div>
      <div class="header-right">
        <div class="profile">
          <a href="/frontend/profile.html">
            <img src="/frontend/images/avatar.png" alt="Профиль"
          /></a>
        </div>
      </div>
    </div>

    <!-- Основное содержимое -->
    <div class="main-content statistics-content">
      <!-- Колонка 1 -->
      <div class="column-1">
        <!-- Динамика баланса -->
        <div class="balance-card">
          <div class="card-header">
            <h2>Динамика баланса</h2>
            <div class="header-actions">
              <select id="period-select" class="period-select">
                <option value="week">Неделя</option>
                <option value="month" selected>Месяц</option>
                <option value="year">Год</option>
              </select>
            </div>
          </div>
          <div class="progress-chart">
            <canvas id="balanceTrendChart"></canvas>
          </div>
        </div>

        <!-- Сравнение месяцев -->
        <div class="progress-card scrollable-card">
          <div class="card-header">
            <h2>Сравнение месяцев</h2>
            <button class="details-btn" data-target="monthComparisonDetails">
              <span>Детали</span>
              <i class="bx bx-chevron-right"></i>
            </button>
          </div>
          <div class="progress-chart">
            <canvas id="monthComparisonChart"></canvas>
          </div>
          <!-- Детализированная таблица -->
          <div class="details-content" id="monthComparisonDetails">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>Категория</th>
                  <th>Текущий</th>
                  <th>Прошлый</th>
                  <th>Разница</th>
                </tr>
              </thead>
              <tbody>
                <!-- Данные будут заполнены через JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Колонка 2 -->
      <div class="column-2">
        <!-- Доходы vs Расходы -->
        <div class="transactions-card">
          <div class="card-header">
            <h2>Доходы vs Расходы</h2>
            <div class="header-actions">
            </div>
          </div>
          <div class="transactions-chart">
            <canvas id="incomeExpenseChart"></canvas>
          </div>
          <div class="stats-summary">
            <div class="stat-item income">
              <i class="bx bx-chevron-up"></i>
              <span class="stat-value">+85,000 ₽</span>
              <span class="stat-label">Доходы</span>
            </div>
            <div class="stat-item expense">
              <i class="bx bx-chevron-down"></i>
              <span class="stat-value">-42,300 ₽</span>
              <span class="stat-label">Расходы</span>
            </div>
            <div class="stat-item net">
              <i class="bx bx-trending-up"></i>
              <span class="stat-value">+42,700 ₽</span>
              <span class="stat-label">Итого</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Колонка 3 -->
      <div class="column-3">
        <!-- Категории расходов -->
        <div class="goals-card scrollable-card">
          <div class="card-header">
            <h2>Категории расходов</h2>
            <button class="details-btn" data-target="categoriesDetails">
              <span>Детали</span>
              <i class="bx bx-chevron-right"></i>
            </button>
          </div>
          <div class="monthly-chart">
            <canvas id="expenseCategoriesChart"></canvas>
          </div>
          <div class="details-content" id="categoriesDetails">
            <div class="categories-list">
              <!-- Данные будут заполнены через JS -->
            </div>
            <div class="category-transactions">
            </div>
          </div>
        </div>
        <!-- Финансовое здоровье -->
        <div class="health-card">
          <div class="card-header">
            <h2>Финансовое здоровье</h2>
            <div class="tooltip-container">
              <i class="bx bx-info-circle health-tooltip"></i>
              <div class="tooltip-text">
                Оценка вашего финансового состояния на основе доходов, расходов
                и сбережений. Показатели выше 70% считаются отличными, ниже 30%
                - требуют внимания.
              </div>
            </div>
          </div>
          <div class="health-metrics">
            <div class="metric-item">
              <div class="metric-progress">
                <div class="circular-progress" data-value="75">
                  <svg viewBox="0 0 36 36">
                    <path
                      class="progress-bg"
                      d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    />
                    <path
                      class="progress-bar"
                      stroke-dasharray="75, 100"
                      d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    />
                  </svg>
                  <span class="progress-value">75%</span>
                </div>
              </div>
              <div class="metric-info">
                <h3>Сбережения</h3>
                <p>Откладываете 15% от доходов</p>
                <div class="metric-range">
                  <div class="range-fill" style="width: 75%"></div>
                </div>
              </div>
            </div>
            <div class="metric-item">
              <div class="metric-progress">
                <div class="circular-progress" data-value="35">
                  <svg viewBox="0 0 36 36">
                    <path
                      class="progress-bg"
                      d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    />
                    <path
                      class="progress-bar"
                      stroke-dasharray="35, 100"
                      d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    />
                  </svg>
                  <span class="progress-value">35%</span>
                </div>
              </div>
              <div class="metric-info">
                <h3>Соотношение</h3>
                <p>Расходы/доходы в норме</p>
                <div class="metric-range">
                  <div class="range-fill" style="width: 35%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/frontend/script/statistics.js"></script>
    <script src="/frontend/script/greeting.js"></script>
  </body>
</html>
